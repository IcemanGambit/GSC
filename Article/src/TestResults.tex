\section{Test Results}\label{sec:Test}
In this section, we test the proposed techinque on the use case explained in the previouse section.

\subsection{Verification of Results}
It is imporant to verify that the results obtained from the simulator actually matches real-world observations.
Figure~\ref{fig:TestResults:realDistance} shows travel distance as a function of time from a project called Spar p√• Farten\cite{} for main route of Hobrovej.
We see that some vehicles stop that about 300 m, 600 m, 900 m and 1200 m.
This corresponds well with the dimentions of Hobrovej and match the four regulated traffic lights. 

\begin{figure}[htb]
\includegraphics[width=0.5\textwidth]{../images/Real/RealDistance.png}
\caption{Travel distance for real GPS data}
\label{fig:TestResults:realDistance}
\end{figure}

Figure~\ref{fig:TestResults:distance0} also plots the travel distance as a function over time, only for the simulated vehicles.
We see that the simulation resembles the real-world results quite well, however, the simulated vehicles tend to hold longer at the traffic lights. 
This is because the traffic light phases of the simulation are too different compared to real traffic lights. 
Besides that, the acceleration profiles look similar.

\begin{figure}[htb]
\includegraphics[width=0.5\textwidth]{../images/tp0/distanceUncontrolled0.png}
\caption{Travel distance for simulated data without \tech}
\label{fig:TestResults:distance0}
\end{figure}

%TODO: Redo this, as it is not correct any more
If we compare the driving speed of the simulation shown in Figure \ref{fig:TestResults:speed0} with the real-world data from Figure \ref{fig:TestResults:RealSpeed} we see that in most cases the vehicles are either driving at the maximum speed, or they are at a full stop. 
The behavior are almost identical on the two graphs and consistent with the stop-and-go behavior caused by traffic lights. 

\begin{figure}[htb]
\includegraphics[width=0.5\textwidth]{../images/Real/RealSpeed.png}
\caption{Speed for real GPS data}
\label{fig:TestResults:RealSpeed}
\end{figure}
\begin{figure}[htb]
\includegraphics[width=0.5\textwidth]{../images/tp0/speedUncontrolled0.png}
\caption{Speed for simulated data without \tech}
\label{fig:TestResults:speed0}
\end{figure}

%TODO: finish this
Figure \ref{} shows the distance to a traffic light where each vehicles makes a stop. 
All the blue dots are vehicles that only have a single stop, red squares have two stops and yellow triangles have three stops.
The traffic light for this figure is the top junction at Vesterbro (see Figure \ref{fig:Introduction:hobro}). 
Figure \ref{} show the real-world data from the same traffic light. 
\begin{figure}[htb]
%\includegraphics[width=0.5\textwidth]{../images/tp0/stop0.png}
\caption{Number of stops for simulated data without \tech}
\label{fig:TestResults:stop0}
\end{figure}


\subsection{Fuel Consumption}
The purpose of \tech is to reduce the fuel consumption at least for the vehicles using the system. 
We use SUMO's build-in function to calculate the vehicles fuel consumption, which is explained in \cite{SUMOFuel}.

Figure~\ref{fig:TestResults:fuelTotal} plots the fuel consumption for all vehicles in the network for two different simulations: one where all vehicles use \tech (blue) and one where no vehicles are using \tech (green).
The amount of vehicles are the same in both simulations, and the drive the same routes with the same departure times. 
The only difference is whether they use \tech or not.

The average fuel consumption when all vehicles use \tech is about $77 ml$, and about $108 ml$ when no one use \tech.
We therefore see a significant overall reduction in fuel consumption on 28.7 \% in this setting if \tech is used by everybody.
Looking at just the selected route through the network, we see the same tendency (see Figure~\ref{fig:TestResults:fuelRoute}). 
The average fuel consumption with \tech is about $114 ml$ and about $166 ml$ without, resulting in a reduction at 31.3 \%.
\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../images/tp0/fuelTotal.png}
\caption{Fuel consumption for all vehicles in the network. Blue: 100\% using \tech, green: 0\% using \tech}
\label{fig:TestResults:fuelTotal}
\end{figure}
\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../images/tp0/fuelRoute.png}
\caption{Fuel consumption for all vehicles on the selected route}
\label{fig:TestResults:fuelRoute}
\end{figure}

It is, however, also interesting to investigate the influence \tech has when only a few drivers use it.
Figure~\ref{fig:TestResults:fuelControlled10} and~\ref{fig:TestResults:fuelUncontrolled10} plot the fuel consumption for 10\% of the vehicles are using \tech - Figure~\ref{fig:TestResults:fuelControlled10} shows the 10 \% using \tech, and Figure~\ref{fig:TestResults:fuelUncontrolled10} show the 90 \% not using \tech.
We see that the average fuel consumption is about $119 ml$ for the 10 \% using \tech, and about $168$ for the 90 \% not using it.
The fuel consumption is signifinatly less for those who use \tech, and the fuel consumption is only increased by $1 ml$ for those who do not use \tech compared to the situation where no vehicles used \tech.
We see the same results when 50 \% of the vehicles use \tech.
\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../images/tp0/fuelRouteControlled10.png}
\caption{Fuel consumption for the 10 \% of the vehicles driving with \tech on the selected route}
\label{fig:TestResults:fuelControlled10}
\end{figure}
\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../images/tp0/fuelRouteUncontrolled10.png}
\caption{Fuel consumption for the 90 \% of the vehicles driving without \tech on the selected route}
\label{fig:TestResults:fuelUncontrolled10}
\end{figure}

We can therefore conclude that in the tested use case, we see a significate reduction in fuel consumption even when it is only implemented in a small subset of the vehicles. 
Moreover, vehicles using \tech does not have a negative influence the other fuel consumption of the vehicles.

\subsection{Travel time}
Reducing the fuel consumption is important, but it cannot be at the expense of traffic flow or the vehicles travel time.
Figure~\ref{fig:TestResults:combinedTime} show the average travel time for all vehicles on all routes in the network at different levels of penetration.
With 0 \% using \tech we see an average travel time of $150$ seconds. 
Introducing the systemt to 10 \% of the vehicles does not change this significantly. 
However, as the penetration rate increase, we see a small reduction in travel time. 
This is mostly due to the fact that vehicles do not make a full stop at traffic lights, and therefore are able to start faster.

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../images/tp0/combinedTime.png}
\caption{Travel time for all routes at different level of vehicles using \tech}
\label{fig:TestResults:combinedTime}
\end{figure}

\subsection{Distance}
Figure~\ref{fig:TestResults:distance100} shows the travel distance on the selected route as a function of time when their driving behaviour is solely controlled by SUMO. 
The vehicle is stationary whenever the curve flatens.
From the figure we clearly see that the vehicles on this route has to stop four times, at 250 meter, at 550 meters, at 750 meters and again at 1100 metets.

When we control the speed of the vehicles using \tech, we see a different result showed in Figure~\ref{fig:TestResults:distance100}.
The curves in this figure are much more smooth, and fewer vehicles has to stop completely at a cross section.
Some vehicles have to stop due to blocking vehicles or cross traffic, which we do not take into account.

We can therefore see that using \tech results in less full stops.

The results of introducing the system to 10\% of the vehicles can be seen in Figure~\ref{fig:TestResults:distanceUnC10}. 
The remaning 90\% is for the most part unaffected by the system. 
There is a few instances where uncontrolled vehicles are forced to slow down and stay behind a slower moving vehicle using the system.

\begin{figure}[H]
\includegraphics[width=0.5\textwidth]{../images/tp0/distanceUncontrolled10.png}
\caption{Travel distance for the 90 \% of the vehicles driving without \tech on the selected route}
\label{fig:TestResults:distanceUnC10}
\end{figure}

\begin{figure}[H]
\includegraphics[width=0.5\textwidth]{../images/tp0/distanceControlled100.png}
\caption{Travel distance of vehicles when all drive with \tech on the selected route}
\label{fig:TestResults:distance100}
\end{figure}

\subsection{Speed}
Figure~\ref{fig:TestResults:speed0} shows the speed at which SUMO controlled vehicles on the selected route drive as a function over time.
The graph clearly shows that the vehicles quicly accelerates up to the maximal speed, then quickly decelerates to a full stop and then quickly accelerates again.
By using \tech we see a very different outline (See Figure~\ref{fig:TestResults:speed100}).
Few vehicles decelerates to $0\ km/h$, and most stay above $14\ km/h$.

Again, the result of introducing the system to 10\% of the vehicles can be seen in Figure \ref{fig:TestResults:speedUnC10}. 
The remaning 90\% is almoste unaffected by the system.

\begin{figure}[H]
\includegraphics[width=0.5\textwidth]{../images/tp0/speedUncontrolled10.png}
\caption{Speed for the 90 \% of the vehicles driving without \tech on the selected route}
\label{fig:TestResults:speedUnC10}
\end{figure}

\begin{figure}[H]
\includegraphics[width=0.5\textwidth]{../images/tp0/speedControlled100.png}
\caption{Speed of vehicles when all drive with \tech on the selected route}
\label{fig:TestResults:speed100}
\end{figure}
